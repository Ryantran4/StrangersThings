(this.webpackJsonpStrangerThings=this.webpackJsonpStrangerThings||[]).push([[0],{31:function(e,t,n){"use strict";n.r(t);var r=n(3),s=n(1),c=n(18),o=n.n(c),a=n(10),i=n(0),u=function(e){return Object(i.jsxs)("div",{id:"container",children:[Object(i.jsx)("header",{id:"header",children:Object(i.jsx)("h1",{children:"Stranger's Things"})}),Object(i.jsxs)("div",{id:"navbar",children:[Object(i.jsx)(a.b,{to:"/Home",style:{color:"#ff1515"},children:"Home"}),Object(i.jsx)(a.b,{to:"/Posts",style:{color:"#ff1515"},children:"Posts"}),Object(i.jsx)(a.b,{to:"/account/Login",style:{color:"#ff1515"},children:"Login"}),Object(i.jsx)(a.b,{to:"/account/Register",style:{color:"#ff1515"},children:"Register"}),Object(i.jsx)(a.b,{to:"Profile",style:{color:"#ff1515"},children:"Profile"})]})]})},j=n(4),h=n.n(j),p=n(6),l=function(e){var t=Object(s.useState)([]),n=Object(r.a)(t,2),c=n[0],o=n[1],a=e.token,u=function(){var t=Object(p.a)(h.a.mark((function t(n,r){var s,a,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT/posts/".concat(n),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token.token}});case 2:return s=t.sent,t.next=5,s.json();case 5:a=t.sent,console.log("data: ",a),a&&(i=c.filter((function(e){return e._id!==n})),o(i));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(s.useEffect)((function(){var t=function(){var e=Object(p.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT/posts");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,o(n.data.posts);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var t=Object(p.a)(h.a.mark((function t(){var n,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT/posts",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.token.token}});case 2:return n=t.sent,t.next=5,n.json();case 5:r=t.sent,o(r.data.posts);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e.token.token.length<3?t():n()}),[]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{children:"Posts"}),Object(i.jsx)(v,{posts:c,setPosts:o,token:a}),c.map((function(e){return Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{children:e.title}),Object(i.jsx)("h4",{children:e.description}),Object(i.jsx)("h5",{children:e.price}),e.isAuthor?Object(i.jsx)("button",{onClick:function(){return u(e._id)},children:"Delete"}):null]},e._id)}))]})},b=n(2),d="https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT",O=function(e){var t=e.setToken,n=(e.token,e.props,Object(s.useState)("")),c=Object(r.a)(n,2),o=c[0],a=c[1],u=Object(s.useState)(""),j=Object(r.a)(u,2),l=j[0],O=j[1],f=Object(b.f)(),x=b.e;return console.log("params: ",f),console.log("setUser : ",setUser),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{children:f.method}),Object(i.jsxs)("form",{onSubmit:function(){var e=Object(p.a)(h.a.mark((function e(n){var r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),"".concat(d,"/user/").concat(f.method),e.next=4,fetch("".concat(d,"/user/").concat(f.method),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:o,password:l}})});case 4:return r=e.sent,e.next=7,r.json();case 7:(s=e.sent).data&&(t(s.data.token),s.data.token&&x.push("/Home"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(i.jsx)("input",{type:"text",placeholder:"username",value:o,onChange:function(e){return a(e.target.value)}}),Object(i.jsx)("hr",{}),Object(i.jsx)("input",{type:"password",placeholder:"password",value:l,onChange:function(e){return O(e.target.value)}}),Object(i.jsx)("hr",{}),"Register"===f.method?Object(i.jsx)("div",{children:"Register Input"}):"",Object(i.jsx)("button",{type:"submit",children:"Submit"})]})]})},f=function(e){var t=e.setToken,n=e,c=Object(b.f)(),o=Object(s.useState)([]),a=Object(r.a)(o,2);a[0],a[1];return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(b.a,{exact:!0,path:"/Home",children:Object(i.jsx)(x,{})}),Object(i.jsx)(b.a,{exact:!0,path:"/Posts",children:Object(i.jsx)(l,{token:n})}),Object(i.jsx)(b.a,{exact:!0,path:"/account/:method",children:"login"===c.method?Object(i.jsx)(O,{setToken:t}):Object(i.jsx)(m,{setToken:t,token:n})}),Object(i.jsx)(b.a,{exact:!0,path:"/Profile",children:Object(i.jsx)(k,{token:n})})]})},x=function(){return Object(i.jsxs)("h1",{children:["Welcome To Stranger's Things,",Object(i.jsx)("br",{})," The Top Rated Seller's Platform of 2021!"]})},g=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r,s,c,o,a,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,r=t.method,s=t.token,c=t.body,e.prev=1,console.log(">>>>>"),console.log(n),console.log(r),console.log(s),console.log(c),console.log(">>>>>"),o={method:r.toUpperCase(),headers:{"Content-Type":"application/json"},body:JSON.stringify(c)},s&&(o.headers.Authorization="Bearer ".concat(s)),console.log("options :",o),e.next=13,fetch("".concat("https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT").concat(n),o);case 13:return a=e.sent,e.next=16,a.json();case 16:if(!(i=e.sent).error){e.next=19;break}throw i.error;case 19:return e.abrupt("return",i);case 22:e.prev=22,e.t0=e.catch(1),console.error(e.t0);case 25:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}(),m=function(e){var t=e.setToken,n=(e.token,Object(s.useState)("")),c=Object(r.a)(n,2),o=c[0],a=c[1],u=Object(s.useState)(""),j=Object(r.a)(u,2),l=j[0],d=j[1],O=Object(b.f)(),f=Object(b.e)();return console.log("params: ",O),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{children:O.method}),Object(i.jsxs)("form",{onSubmit:function(){var e=Object(p.a)(h.a.mark((function e(n){var r,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r="".concat("https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT","/users/").concat(O.method),e.next=4,fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:{username:o,password:l}})});case 4:return s=e.sent,e.next=7,s.json();case 7:(c=e.sent).data&&(t(c.data.token),console.log(c.data),c.data.token&&f.push("/Home"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(i.jsx)("input",{type:"text",placeholder:"username",value:o,onChange:function(e){return a(e.target.value)}}),Object(i.jsx)("hr",{}),Object(i.jsx)("input",{type:"password",placeholder:"password",value:l,onChange:function(e){return d(e.target.value)}}),Object(i.jsx)("hr",{}),"Register"===O.method?Object(i.jsx)("div",{children:"Register Input"}):"",Object(i.jsx)("button",{type:"submit",children:"Submit"})]})]})},v=function(e){e.setPosts;var t=e.token,n=Object(s.useState)(""),c=Object(r.a)(n,2),o=c[0],a=c[1],u=Object(s.useState)(""),j=Object(r.a)(u,2),l=j[0],b=j[1],d=Object(s.useState)(""),O=Object(r.a)(d,2),f=O[0],x=O[1],m=function(){var e=Object(p.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log({title:o,description:l}),e.next=4,g({url:"/posts",method:"POST",token:t.token,body:{post:{title:"".concat(o),description:"".concat(l),price:"".concat(f)}}});case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h3",{children:"List Item"}),Object(i.jsxs)("form",{onSubmit:m,children:[Object(i.jsx)("input",{type:"text",placeholder:"title",value:o,onChange:function(e){return a(e.target.value)}}),Object(i.jsx)("input",{type:"text",placeholder:"description",value:l,onChange:function(e){return b(e.target.value)}}),Object(i.jsx)("input",{type:"text",placeholder:"price",value:f,onChange:function(e){return x(e.target.value)}}),Object(i.jsx)("button",{type:"submit",children:"Add Listing"})]})]})},k=function(e){var t=e.token,n=Object(s.useState)([]),c=Object(r.a)(n,2),o=c[0],a=c[1];return console.log("token:",t.token),Object(s.useEffect)(Object(p.a)(h.a.mark((function e(){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://strangers-things.herokuapp.com/api/2105-SJS-RM-WEB-PT/users/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)}});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,a(r.data.messages);case 7:case"end":return e.stop()}}),e)}))),[]),Object(i.jsxs)("div",{className:"content",children:[Object(i.jsx)("h1",{children:"Profile"}),o.map((function(e){return Object(i.jsxs)("div",{className:"msg",children:[Object(i.jsx)("br",{}),Object(i.jsxs)("h3",{children:["Message:",e.fromUser.username]}),Object(i.jsx)("h3",{children:e.content}),Object(i.jsx)("br",{}),Object(i.jsx)("span",{children:e.post.title})]})}))]})},S=function(){var e=Object(s.useState)(""),t=Object(r.a)(e,2),n=t[0],c=t[1];console.log("token: ",n);var o=Object(s.useState)([]),j=Object(r.a)(o,2),h=(j[0],j[1],Object(s.useState)("")),p=Object(r.a)(h,2);p[0],p[1];return Object(i.jsx)(a.a,{children:Object(i.jsxs)("div",{className:"app",children:[Object(i.jsx)(u,{}),Object(i.jsx)(f,{setToken:c,token:n})]})})};o.a.render(Object(i.jsx)(S,{}),document.querySelector("#app"))}},[[31,1,2]]]);
//# sourceMappingURL=main.92679ff8.chunk.js.map